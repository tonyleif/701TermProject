<div class="row container">
  <!-- Left column -->
  <div class="col-2 mb-2">
    <!-- Weeks dropdown -->
    <div class="row mb-2">
      <p *ngIf="!doneLoadingSchedule">Loading schedule...</p>
      <select *ngIf="doneLoadingSchedule" id="weekSelect" [(ngModel)]="selectedWeek" class="btn btn-primary">
        <option value="undefined">Select Week</option>
        <option *ngFor="let week of weeks; i as index" [value]="week">
          Week {{week}}
        </option>
      </select>
    </div>
    <!-- Game List -->
    <div class="row">
      <ul id="games" class="list-group">
        <li *ngFor="let game of games" class="list-group-item btn btn-link btn-sm hoverable" [ngClass]="{'active': this.selectedGameId == game.id, 'not-selected': this.selectedGameId != game.id }"
          (click)="setGame(game.id)">
          {{game.awayTeam.Abbreviation}} @ {{game.homeTeam.Abbreviation}}
        </li>
      </ul>
    </div>
  </div>
  <!-- Main part of page -->
  <div class="col-10">
    <!-- Game Header -->
    <div *ngIf="selectedGame" class="row d-inline">
      <span *ngIf="loadingPlays">
        Loading...
      </span>
      <!-- <h3 class="d-inline-block">{{selectedGame.awayTeam.City}} {{selectedGame.awayTeam.Name}} @ {{selectedGame.homeTeam.City}} {{selectedGame.homeTeam.Name}}</h3> -->
      <div class="col-4 d-inline">
        <button (click)="previousPlay()" *ngIf="showPlays" [disabled]="currentPlayIndex < 0" class="btn btn-default">Previous Play</button>
        <button (click)="nextPlay()" *ngIf="showPlays" [disabled]="this.currentPlayIndex == this.plays.length - 1" class="btn btn-success ml-1">Next Play</button>
      </div>
      <div id="gameHeader" class="d-inline col-8 float-right">
        <div class="crop d-inline">
          <img *ngIf="selectedGame" src='{{awayTeamObject.officialImageSrc}}' class="team-logo" />
        </div>
        {{selectedGame.awayTeam.City}} @
        <div class="crop d-inline">
          <img *ngIf="selectedGame" src='{{homeTeamObject.officialImageSrc}}' class="team-logo" />
        </div>
        {{selectedGame.homeTeam.City}}
      </div>
      <!-- <h5>{{selectedGame.date}}</h5> -->
      <!-- This button was here for testing end of game -->
      <!-- <button (click)="goToLastPlay()">Go to last play</button> -->
    </div>
    <div class="row">
      <!-- Plays -->
      <div class="container-fluid mb-0 mt-2">
        <div *ngIf="(showPlays && this.currentPlayIndex == this.plays.length - 1)" class="alert alert-success mb-0">Game Over</div>
      </div>
      <!-- Current Play -->
      <!-- <div *ngFor="let play of [currentPlay]" class="container">
          <div *ngIf="currentPlayIndex > -1" [@flyInOut]="direction">
            <div>{{play.description}}</div>
          </div>
        </div> -->
      <div *ngFor="let currentPlay of [currentPlay]" class="container-fluid">
        <div *ngIf="currentPlayIndex > -1" [@flyInOut]="direction" class="jumbotron my-2">
          <!-- <div *ngFor="let play of [currentPlay]" *ngIf="currentPlayIndex > -1" [@flyInOut]="direction" class="container jumbotron my-2"> -->
          <div id="playHeader" class="text-secondary">Q{{currentPlay.quarter}} {{currentPlay.clock}} {{currentPlay.downAndDistance}}</div>
          <div *ngIf="currentPlay.playType === 0" class="container row">
            <!-- Kicker -->
            <div class="player-image">
              <img *ngIf="!currentPlay.kickingPlay.kickingPlayer.noImageUrl" src={{currentPlay.kickingPlay.kickingPlayer.officialImageSrc}}
                class="rounded" />
              <!-- <div *ngIf="currentPlay.kickingPlay.kickingPlayer.noImageUrl" class="ml-3">
                <div class="row text-center">
                  {{currentPlay.kickingPlay.kickingPlayer.firstName}}
                </div>
                <div class="row text-center">
                  {{currentPlay.kickingPlay.kickingPlayer.lastName}}
                </div>
                <div class="row text-center">
                  (No Image)
                </div>
              </div> -->
            </div>
          </div>
          <div *ngIf="currentPlay.playType === 1" class="container row">
            <!-- Rusher -->
            <div class="player-image">
              <img *ngIf="!currentPlay.rushingPlay.rushingPlayer.noImageUrl" src={{currentPlay.rushingPlay.rushingPlayer.officialImageSrc}}
                class="rounded d-inline" />
              <!-- <div *ngIf="currentPlay.rushingPlay.rushingPlayer.noImageUrl" class="ml-3">
                <div class="row text-center">
                  {{currentPlay.rushingPlay.rushingPlayer.firstName}}
                </div>
                <div class="row text-center">
                  {{currentPlay.rushingPlay.rushingPlayer.lastName}}
                </div>
                <div class="row text-center">
                  (No Image)
                </div>
              </div> -->
            </div>
            <div class="player-data">
              <div class="row">
                {{currentPlay.rushingPlay.rushingPlayer.firstName}} {{currentPlay.rushingPlay.rushingPlayer.lastName}}
              </div>
              <div class="row">
                <strong>{{currentPlay.rushingPlay.yardsRushed}}</strong>&nbsp;rushing yards
              </div>
              <div *ngIf="currentPlay.rushingPlay.isEndedWithTouchdown" class="row">
                <strong class="alert alert-success">TOUCHDOWN!</strong>
              </div>
              <div *ngIf="currentPlay.rushingPlay.isTwoPointConversion" class="row">
                <strong class="alert alert-success">2 pt conversion</strong>
              </div>
            </div>
          </div>
          <div *ngIf="currentPlay.playType === 2" class="container row">
            <!-- Passer -->
            <div class="player-image">
              <img *ngIf="!currentPlay.passingPlay.passingPlayer.noImageUrl" src={{currentPlay.passingPlay.passingPlayer.officialImageSrc}}
                class="rounded" />
              <!-- <div *ngIf="currentPlay.passingPlay.passingPlayer.noImageUrl">
                <div class="row text-center">
                  {{currentPlay.passingPlay.passingPlayer.firstName}}
                </div>
                <div class="row text-center">
                  {{currentPlay.passingPlay.passingPlayer.lastName}}
                </div>
                <div class="row text-center">
                  (No Image)
                </div>
              </div> -->
            </div>
            <div class="player-data">
              <div class="row">
                {{currentPlay.passingPlay.passingPlayer.firstName}} {{currentPlay.passingPlay.passingPlayer.lastName}}
              </div>
              <div *ngIf="!currentPlay.passingPlay.isCompleted" class="row">
                <strong class="alert alert-danger">Incomplete</strong>
              </div>
              <div *ngIf="currentPlay.passingPlay.isCompleted" class="row">
                <strong>{{currentPlay.passingPlay.totalYardsGained}}</strong>&nbsp;passing yards
              </div>
              <div *ngIf="currentPlay.passingPlay.isEndedWithTouchdown" class="row">
                <strong class="alert alert-success">TOUCHDOWN!</strong>
              </div>
              <div *ngIf="currentPlay.passingPlay.isTwoPointConversion" class="row">
                <strong class="alert alert-success">2 pt conversion</strong>
              </div>
            </div>
            <!-- Receiver -->
            <!-- <div *ngIf="!currentPlay.passingPlay.noReceivingPlayer" class="receiver"> -->
            <div *ngIf="!currentPlay.passingPlay.noReceivingPlayer" class="player-image-2">
              <img *ngIf="!currentPlay.passingPlay.receivingPlayer.noImageUrl" src={{currentPlay.passingPlay.receivingPlayer.officialImageSrc}}
                class="rounded" />
              <!-- <div *ngIf="currentPlay.passingPlay.receivingPlayer.noImageUrl" class="ml-6">
                <div class="row text-center">
                  {{currentPlay.passingPlay.receivingPlayer.firstName}}
                </div>
                <div class="row text-center">
                  {{currentPlay.passingPlay.receivingPlayer.lastName}}
                </div>
                <div class="row text-center">
                  (No Image)
                </div>
              </div> -->
            </div>
            <!-- <div class="player-data d-inline">
                <div class="row d-inline">
                  <span>{{currentPlay.passingPlay.receivingPlayer.firstName}} {{currentPlay.passingPlay.receivingPlayer.lastName}}</span>
                </div>
                <div *ngIf="currentPlay.passingPlay.isCompleted" class="row">
                  <strong>{{currentPlay.passingPlay.totalYardsGained}}</strong>&nbsp;receiving yards
                </div>
              </div> -->
            <div *ngIf="!currentPlay.passingPlay.noReceivingPlayer" class="player-data d-inline">
              <div>{{currentPlay.passingPlay.receivingPlayer.firstName}} {{currentPlay.passingPlay.receivingPlayer.lastName}}</div>
              <div *ngIf="currentPlay.passingPlay.isCompleted">
                <strong>{{currentPlay.passingPlay.totalYardsGained}}</strong>&nbsp;receiving yards
              </div>
            </div>
            <!-- </div> -->
          </div>
          <div *ngIf="currentPlay.playType === 3" class="container row">
            <!-- Kicker -->
            <div class="player-image">
              <img src={{currentPlay.kickAttempt.kickingPlayer.officialImageSrc}} class="rounded" />
            </div>
            <div *ngIf="currentPlay.kickAttempt.kickingPlayer.noImageUrl" class="ml-3">
              <div class="row text-center">
                {{currentPlay.kickAttempt.kickingPlayer.firstName}}
              </div>
              <div class="row text-center">
                {{currentPlay.kickAttempt.kickingPlayer.lastName}}
              </div>
              <div class="row text-center">
                (No Image)
              </div>
            </div>
            <div class="player-data">
              <div class="row">
                {{currentPlay.kickAttempt.kickingPlayer.firstName}} {{currentPlay.kickAttempt.kickingPlayer.lastName}}
              </div>
              <div *ngIf="currentPlay.kickAttempt.isFieldGoal" class="row">
                  <strong *ngIf="currentPlay.kickAttempt.isGood" class="alert alert-success">{{currentPlay.kickAttempt.yardsKicked}} yard FG is good!</strong>
                  <strong *ngIf="!currentPlay.kickAttempt.isGood" class="alert alert-danger">{{currentPlay.kickAttempt.yardsKicked}} yard FG is NO good</strong>
              </div>
              <div *ngIf="currentPlay.kickAttempt.isExtraPoint" class="row">
                  <strong *ngIf="currentPlay.kickAttempt.isGood" class="alert alert-success">Extra point is good!</strong>
                  <strong *ngIf="!currentPlay.kickAttempt.isGood" class="alert alert-danger">Extra point is NO good</strong>
              </div>
            </div>
          </div>
          <div class="mt-3">{{currentPlay.description}}</div>
        </div>
      </div>
      <div *ngFor="let oneAgo of [onePlayAgo]" class="container-fluid">
        <div *ngIf="onePlayAgo" [@flyInOut]="direction" class="list-group-item">
          <small>
            <div class="text-secondary">Q{{oneAgo.quarter}} {{oneAgo.clock}} {{oneAgo.downAndDistance}}</div>
            {{oneAgo.description}}
          </small>
        </div>
      </div>
      <div *ngFor="let twoAgo of [twoPlaysAgo]" class="container-fluid">
        <div *ngIf="twoPlaysAgo" [@flyInOut]="direction" class="list-group-item">
          <small>
            <div class="text-secondary">Q{{twoAgo.quarter}} {{twoAgo.clock}} {{twoAgo.downAndDistance}}</div>
            {{twoAgo.description}}
          </small>
        </div>
      </div>
      <div *ngFor="let threeAgo of [threePlaysAgo]" class="container-fluid">
        <div *ngIf="threePlaysAgo" [@flyInOut]="direction" class="list-group-item">
          <small>
            <div class="text-secondary">Q{{threeAgo.quarter}} {{threeAgo.clock}} {{threeAgo.downAndDistance}}</div>
            {{threeAgo.description}}
          </small>
        </div>
      </div>
      <div *ngFor="let fourAgo of [fourPlaysAgo]" class="container-fluid">
        <div *ngIf="fourPlaysAgo" [@flyInOut]="direction" class="list-group-item">
          <small>
            <div class="text-secondary">Q{{fourAgo.quarter}} {{fourAgo.clock}} {{fourAgo.downAndDistance}}</div>
            {{fourAgo.description}}
          </small>
        </div>
      </div>
      <!-- <ul class="list-group">
      <li *ngFor="let play of playsToShow" [@flyInOut]="direction" class="list-group-item">
        <small>
          <div class="text-secondary">Q{{play.quarter}} {{play.clock}} {{play.downAndDistance}}</div>
          {{play.description}}
        </small>
      </li>
    </ul> -->
    </div>
  </div>
</div>