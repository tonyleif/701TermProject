<div class="row container">
  <!-- Left column -->
  <div class="mb-2 ml-0" style="width: 7em">
    <!-- Weeks dropdown -->
    <div class="row mb-2">
      <p *ngIf="!doneLoadingSchedule">Loading schedule...</p>
      <select *ngIf="doneLoadingSchedule" id="weekSelect" [(ngModel)]="selectedWeek" class="btn btn-primary left-col-btn">
        <option value="undefined">Select</option>
        <option *ngFor="let week of weeks; i as index" [value]="week">
          Week {{week}}
        </option>
      </select>
    </div>
    <!-- Game List -->
    <div class="row">
      <ul id="games" class="list-group">
        <li *ngFor="let game of games" class="list-group-item btn btn-link btn-sm hoverable" [ngClass]="{'active': this.selectedGameId == game.id, 
                      'not-selected': this.selectedGameId != game.id,
                      'watched': game.watched && (this.selectedGameId != game.id)
                       }"
          (click)="setGame(game.id)">
          {{game.awayTeam.Abbreviation}} @ {{game.homeTeam.Abbreviation}}
          <!-- <div *ngIf="this.watched">watched</div> -->
        </li>
      </ul>
    </div>
  </div>
  <!-- Main part of page -->
  <div>
    <!-- Game Header -->
    <div *ngIf="selectedGame" class="row ">
      <!-- d-inline -->
      <span *ngIf="loadingPlays">
        Loading...
      </span>
      <div id="buttonHeader">
        <!-- class="d-inline" -->
        <button (click)="previousPlay()" *ngIf="showPlays" [disabled]="currentPlayIndex < 0" class="btn btn-default">Previous
          Play
        </button>
        <button (click)="nextPlay()" *ngIf="showPlays" [disabled]="this.currentPlayIndex == this.plays.length - 1"
          class="btn btn-success ml-1">Next
          Play
        </button>
        <button (click)="markGameAsWatched()" class="btn ml-1" [ngClass]="{ 'btn-primary': selectedGame.watched }">
          <span *ngIf="selectedGame.watched">Not </span>Done
        </button>
        <!-- This button was here for testing end of game -->
        <button (click)="goToLastPlay()" class="btn btn-primary ml-1">
          Go to last play
        </button>
      </div>
      <div id="gameHeader">
        <!--class="d-inline" float-right -->
        <div id="awayTeam" class="team-header ">
          <!-- d-inline -->
          <div class="crop d-inline">
            <img src='{{awayTeamObject.officialImageSrc}}' class="team-logo" />
          </div>
          {{selectedGame.awayTeam.City}}
        </div>
        <div id="homeTeam" class="team-header">
          <div class="crop d-inline">
            <img src='{{homeTeamObject.officialImageSrc}}' class="team-logo" />
          </div>
          {{selectedGame.homeTeam.City}}
        </div>
      </div>
    </div>
    <div class="row">
      <!-- Plays -->
      <div class="float-left">
        <div class="container-fluid mb-0 mt-2 ml-3 pl-0">
          <div *ngIf="(showPlays && this.currentPlayIndex == this.plays.length - 1)" class="alert alert-success game-alert mb-0">
            Game Over
          </div>
        </div>
        <!-- Current Play -->
        <!-- Needed to make these single play objects into a single object array to make the animations work -->
        <div *ngFor="let currentPlay of [currentPlay]" class="container-fluid play">
          <div *ngIf="currentPlayIndex > -1" [@flyInOut]="direction" class="jumbotron my-2">
            <div id="playHeader" class="text-secondary">Q{{currentPlay.quarter}} {{currentPlay.clock}}
              {{currentPlay.downAndDistance}}</div>
            <div *ngIf="currentPlay.playType === 0" class="container row current-play">
              <!-- Kicker -->
              <div class="player-image">
                <img *ngIf="!currentPlay.kickingPlay.kickingPlayer.noImageUrl" src={{currentPlay.kickingPlay.kickingPlayer.officialImageSrc}}
                  class="rounded" />
                <!-- I initially created this to show the players name when there is no image url 
                  but now I show the name anyway. I'm keeping this here to show work and in case
                  I need it later -->
                <!-- <div *ngIf="currentPlay.kickingPlay.kickingPlayer.noImageUrl" class="ml-3">
                  <div class="row text-center">
                    {{currentPlay.kickingPlay.kickingPlayer.firstName}}
                  </div>
                  <div class="row text-center">
                    {{currentPlay.kickingPlay.kickingPlayer.lastName}}
                  </div>
                  <div class="row text-center">
                    (No Image)
                  </div>
                </div> -->
              </div>
              <!-- Add returner in future -->
            </div>
            <div *ngIf="currentPlay.playType === 1" class="container row current-play">
              <!-- Rusher -->
              <div class="player-image">
                <img *ngIf="!currentPlay.rushingPlay.rushingPlayer.noImageUrl" src={{currentPlay.rushingPlay.rushingPlayer.officialImageSrc}}
                  class="rounded d-inline" />
                <!-- <div *ngIf="currentPlay.rushingPlay.rushingPlayer.noImageUrl" class="ml-3">
                  <div class="row text-center">
                    {{currentPlay.rushingPlay.rushingPlayer.firstName}}
                  </div>
                  <div class="row text-center">
                    {{currentPlay.rushingPlay.rushingPlayer.lastName}}
                  </div>
                  <div class="row text-center">
                    (No Image)
                  </div>
                </div> -->
              </div>
              <div class="player-data">
                <div class="row">
                  {{currentPlay.rushingPlay.rushingPlayer.firstName}}
                  {{currentPlay.rushingPlay.rushingPlayer.lastName}}
                </div>
                <div class="row">
                  <strong>{{currentPlay.rushingPlay.yardsRushed}}</strong>&nbsp;rushing yards
                </div>
                <div *ngIf="currentPlay.rushingPlay.isEndedWithTouchdown" class="row">
                  <strong class="alert alert-success">TOUCHDOWN!</strong>
                </div>
                <div *ngIf="currentPlay.rushingPlay.isTwoPointConversion" class="row">
                  <strong class="alert alert-success">2 pt conversion</strong>
                </div>
              </div>
            </div>
            <div *ngIf="currentPlay.playType === 2" class="container row current-play">
              <!-- Passer -->
              <div class="player-image">
                <img *ngIf="!currentPlay.passingPlay.passingPlayer.noImageUrl" src={{currentPlay.passingPlay.passingPlayer.officialImageSrc}}
                  class="rounded" />
                <!-- <div *ngIf="currentPlay.passingPlay.passingPlayer.noImageUrl">
                  <div class="row text-center">
                    {{currentPlay.passingPlay.passingPlayer.firstName}}
                  </div>
                  <div class="row text-center">
                    {{currentPlay.passingPlay.passingPlayer.lastName}}
                  </div>
                  <div class="row text-center">
                    (No Image)
                  </div>
                </div> -->
              </div>
              <div class="player-data">
                <div class="row">
                  {{currentPlay.passingPlay.passingPlayer.firstName}}
                  {{currentPlay.passingPlay.passingPlayer.lastName}}
                </div>
                <div *ngIf="!currentPlay.passingPlay.isCompleted" class="row">
                  <strong class="alert alert-danger">Incomplete</strong>
                </div>
                <div *ngIf="currentPlay.passingPlay.isCompleted" class="row">
                  <strong>{{currentPlay.passingPlay.totalYardsGained}}</strong>&nbsp;passing yards
                </div>
                <div *ngIf="currentPlay.passingPlay.isEndedWithTouchdown" class="row">
                  <strong class="alert alert-success">TOUCHDOWN!</strong>
                </div>
                <div *ngIf="currentPlay.passingPlay.isTwoPointConversion" class="row">
                  <strong class="alert alert-success">2 pt conversion</strong>
                </div>
              </div>
              <!-- Receiver -->
              <div *ngIf="!currentPlay.passingPlay.noReceivingPlayer" class="player-image-2">
                <img *ngIf="!currentPlay.passingPlay.receivingPlayer.noImageUrl" src={{currentPlay.passingPlay.receivingPlayer.officialImageSrc}}
                  class="rounded" />
                <!-- <div *ngIf="currentPlay.passingPlay.receivingPlayer.noImageUrl" class="ml-6">
                  <div class="row text-center">
                    {{currentPlay.passingPlay.receivingPlayer.firstName}}
                  </div>
                  <div class="row text-center">
                    {{currentPlay.passingPlay.receivingPlayer.lastName}}
                  </div>
                  <div class="row text-center">
                    (No Image)
                  </div>
                </div> -->
              </div>
              <div *ngIf="!currentPlay.passingPlay.noReceivingPlayer" class="player-data d-inline">
                <div>{{currentPlay.passingPlay.receivingPlayer.firstName}}
                  {{currentPlay.passingPlay.receivingPlayer.lastName}}</div>
                <div *ngIf="currentPlay.passingPlay.isCompleted">
                  <strong>{{currentPlay.passingPlay.totalYardsGained}}</strong>&nbsp;receiving yards
                </div>
              </div>
            </div>
            <div *ngIf="currentPlay.playType === 3" class="container row current-play">
              <!-- Kicker -->
              <div class="player-image">
                <img src={{currentPlay.kickAttempt.kickingPlayer.officialImageSrc}} class="rounded" />
              </div>
              <div *ngIf="currentPlay.kickAttempt.kickingPlayer.noImageUrl" class="ml-3">
                <div class="row text-center">
                  {{currentPlay.kickAttempt.kickingPlayer.firstName}}
                </div>
                <div class="row text-center">
                  {{currentPlay.kickAttempt.kickingPlayer.lastName}}
                </div>
                <div class="row text-center">
                  (No Image)
                </div>
              </div>
              <div class="player-data">
                <div class="row">
                  {{currentPlay.kickAttempt.kickingPlayer.firstName}}
                  {{currentPlay.kickAttempt.kickingPlayer.lastName}}
                </div>
                <div *ngIf="currentPlay.kickAttempt.isFieldGoal" class="row">
                  <strong *ngIf="currentPlay.kickAttempt.isGood" class="alert alert-success">{{currentPlay.kickAttempt.yardsKicked}}
                    yard FG is good!</strong>
                  <strong *ngIf="!currentPlay.kickAttempt.isGood" class="alert alert-danger">{{currentPlay.kickAttempt.yardsKicked}}
                    yard FG is NO good</strong>
                </div>
                <div *ngIf="currentPlay.kickAttempt.isExtraPoint" class="row">
                  <strong *ngIf="currentPlay.kickAttempt.isGood" class="alert alert-success">Extra point is good!</strong>
                  <strong *ngIf="!currentPlay.kickAttempt.isGood" class="alert alert-danger">Extra point is NO good</strong>
                </div>
              </div>
            </div>
            <div class="mt-3">{{currentPlay.description}}</div>
          </div>
        </div>
        <!-- Previous plays -->
        <div *ngFor="let oneAgo of [onePlayAgo]" class="container-fluid play">
          <div *ngIf="onePlayAgo" [@flyInOut]="direction" class="list-group-item">
            <small>
              <div class="text-secondary">Q{{oneAgo.quarter}} {{oneAgo.clock}} {{oneAgo.downAndDistance}}</div>
              {{oneAgo.description}}
            </small>
          </div>
        </div>
        <div *ngFor="let twoAgo of [twoPlaysAgo]" class="container-fluid play">
          <div *ngIf="twoPlaysAgo" [@flyInOut]="direction" class="list-group-item">
            <small>
              <div class="text-secondary">Q{{twoAgo.quarter}} {{twoAgo.clock}} {{twoAgo.downAndDistance}}</div>
              {{twoAgo.description}}
            </small>
          </div>
        </div>
        <div *ngFor="let threeAgo of [threePlaysAgo]" class="container-fluid play">
          <div *ngIf="threePlaysAgo" [@flyInOut]="direction" class="list-group-item">
            <small>
              <div class="text-secondary">Q{{threeAgo.quarter}} {{threeAgo.clock}} {{threeAgo.downAndDistance}}</div>
              {{threeAgo.description}}
            </small>
          </div>
        </div>
        <div *ngFor="let fourAgo of [fourPlaysAgo]" class="container-fluid play">
          <div *ngIf="fourPlaysAgo" [@flyInOut]="direction" class="list-group-item">
            <small>
              <div class="text-secondary">Q{{fourAgo.quarter}} {{fourAgo.clock}} {{fourAgo.downAndDistance}}</div>
              {{fourAgo.description}}
            </small>
          </div>
        </div>
      </div>
      <!-- Stats -->
      <div *ngIf="hasPlayersStats" class="ml-1 pt-2">
        <div class="row">
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr style="border-radius: 5px;">
                <th>QB</th>
                <th>Pass</th>
                <th>Rush</th>
                <th>Rec</th>
                <th>PaTD</th>
                <th>TD</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.awayTeamQBsStats">
                <td>{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th></th>
                <th>Pass</th>
                <th>Rush</th>
                <th>Rec</th>
                <th>PaTD</th>
                <th>TD</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.homeTeamQBsStats">
                <td>{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- <h6>RB</h6> -->
        <div class="row">
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th>RB</th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.awayTeamRBsStats">
                <td [ngClass]="{ 'accruedStatsOnLastPlay': playerStat.accruedStatsOnLastPlay }">{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.homeTeamRBsStats">
                <td [ngClass]="{ 'accruedStatsOnLastPlay': playerStat.accruedStatsOnLastPlay }">{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- <h6>WR</h6> -->
        <div class="row">
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th>WR</th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.awayTeamWRsStats">
                <td>{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.homeTeamWRsStats">
                <td>{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- <h6>TE</h6> -->
        <div class="row">
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th>TE</th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.awayTeamTEsStats">
                <td>{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
          <table class="table-sm stat-table">
            <thead class="thead-light">
              <tr>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let playerStat of currentPlayersStats.homeTeamTEsStats">
                <td>{{playerStat.player.lastName}}</td>
                <td>{{playerStat.passYardsNoZero}}</td>
                <td>{{playerStat.rushYardsNoZero}}</td>
                <td>{{playerStat.recYardsNoZero}}</td>
                <td>{{playerStat.passingTouchdownsNoZero}}</td>
                <td>{{playerStat.touchdownsNoZero}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <!-- Away Stats -->
      <!-- <div>
        <div *ngIf="hasPlayersStats">
          <table class="table-sm">
            <thead class="thead-light">
              <th>QB</th>
              <th>Pass</th>
              <th>Rush</th>
              <th>Rec</th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.awayTeamQBsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
            <thead class="thead-light">
              <th>RB</th>
              <th></th>
              <th></th>
              <th></th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.awayTeamRBsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
            <thead class="thead-light">
              <th>WR</th>
              <th></th>
              <th></th>
              <th></th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.awayTeamWRsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
            <thead class="thead-light">
              <th>TE</th>
              <th></th>
              <th></th>
              <th></th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.awayTeamTEsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
          </table>
        </div>
      </div> -->
      <!-- Home Stats -->
      <!-- <div>
        <div *ngIf="hasPlayersStats">
          <table class="table-sm">
            <thead class="thead-light">
              <th>QB</th>
              <th>Pass</th>
              <th>Rush</th>
              <th>Rec</th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.homeTeamQBsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
            <thead class="thead-light">
              <th>RB</th>
              <th></th>
              <th></th>
              <th></th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.homeTeamRBsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
            <thead class="thead-light">
              <th>WR</th>
              <th></th>
              <th></th>
              <th></th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.homeTeamWRsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
            <thead class="thead-light">
              <th>TE</th>
              <th></th>
              <th></th>
              <th></th>
            </thead>
            <tr *ngFor="let playerStat of currentPlayersStats.homeTeamTEsStats">
              <td>{{playerStat.player.lastName}}</td>
              <td>{{playerStat.passingYards}}</td>
              <td>{{playerStat.rushingYards}}</td>
              <td>{{playerStat.receivingYards}}</td>
            </tr>
          </table>
        </div>
      </div> -->
    </div>
  </div>
</div>